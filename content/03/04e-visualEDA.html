
<!DOCTYPE html>

<html>
  <head>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-QHB6CBHE8P"></script>
   <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QHB6CBHE8P');
   </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3.3.4. Visual EDA Walkthrough &#8212; LeDataSciFi-2024</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/frontpage.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fin377_specialformatting.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/moviescript.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script >const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3.3.5. Visual EDA Tools" href="04e2-visualEDA-tools.html" />
    <link rel="prev" title="3.3.3. Which Plot Type Should I Use?" href="04d-whichplot.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">LeDataSciFi-2024</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <p class="caption collapsible-parent">
 <span class="caption-text">
  Syllabus
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../about/objectives.html">
   Objectives
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/outcomes.html">
   Outcomes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/about_us.html">
   About us + office hours
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/structure_and_policies.html">
   Course structure + policies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/use_of_gpt.html">
   ChatGPT and other AI
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/gradeoverview.html">
   Grading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/interest.html">
   Interested but unsure?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/bootcamp.html">
   Pre-Class Bootcamp
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/hall_of_awesomeness.html">
   The Hall of Awesomeness
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/acknowledgments.html">
   Gratitude
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Schedule, tips, resources
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../about/schedule.html">
   Dashboard, key links, schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/help.html">
   Help
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/resources.html">
   Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/tips.html">
   Tips and hacks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/LeDataSciFi/ledatascifi-2024/tree/main/community_codebook">
   Community Codebook
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/LeDataSciFi/ledatascifi-2024/tree/main/handouts">
   Class Handouts
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Assignments and participation
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../assignments/howto_do.html">
   How to start and turn in assignments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assignments/howto_review.html">
   How to do your peer reviews
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assignments/mid_proj.html">
   Midterm project AKA ASGN 5
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assignments/website_setup.html">
   Personal Website AKA ASGN 9
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assignments/project.html">
   Final projects
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Textbook
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../01/00_Getting_Started.html">
   1. Motivation and Getting Started
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../01/01_Motivation.html">
     1.1. Motivation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/02_Setup.html">
     1.2. Set up
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/03_github.html">
     1.3. GitHub Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/03a_githubworkflow.html">
     1.4. The GitHub Workflow
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/04_Markdown.html">
     1.5. Markdown basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/05_jupyterlab.html">
     1.6. Jupyter Lab Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/06_python.html">
     1.7. Python Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/07_debugging.html">
     1.8. Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/07a_errors.html">
     1.9. Errors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/08_libraries.html">
     1.10. Libraries/Packages
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/09_gitignore.html">
     1.11. Gitignore Files
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../02/10_Golden_1.html">
   2. Good Analysis Practices
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_2.html">
     2.1. A case study of bad research
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_3.html">
     2.2. The golden rules
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_6.html">
     2.3. Organizing your projects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_7.html">
     2.4. Filepaths
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_4.html">
     2.5. Storing data smartly
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_5a.html">
     2.6. Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_5b.html">
     2.7. Writing good code comments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_8.html">
     2.8. Writing good code
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="00_Data_Wrangling_Intro.html">
   3. Wrangling with Data
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="01_Numpy.html">
     3.1. Numpy
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="01a_NumpyCS.html">
       3.1.1. Numpy + Scientific Computing
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="01b_NumpyBasics.html">
       3.1.2. A (Very) Short Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="01c_NumpyPractice.html">
       3.1.3. Exercises
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="01d_NumpyResources.html">
       3.1.4. More Resources
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="02a_pandasIntro.html">
     3.2. Pandas
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="02a_pandasTips.html">
       3.2.1. Tips
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02b_pandasVocab.html">
       3.2.2. Vocab and Long vs Wide Data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02c_commonFcns.html">
       3.2.3. Common Functions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02d_temp.html">
       3.2.4. Temp. vs Perm. Objects
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02e_eda_golden.html">
       3.2.5. Golden Rules + EDA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02f_chains.html">
       3.2.6. Pandas Chains
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02g_commontasks.html">
       3.2.7. Common Tasks
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02h_exercises.html">
       3.2.8. Exercises
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02j_resourcesAndSum.html">
       3.2.9. Summary and Resources
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2 current active collapsible-parent">
    <a class="reference internal" href="04a-dataviz.html">
     3.3. Data Visualization
    </a>
    <ul class="current collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="04b-whyplot.html">
       3.3.1. The Role of Viz in Analysis
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="04c-makeplot.html">
       3.3.2. Making a Plot
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="04d-whichplot.html">
       3.3.3. Which Plot Type Should I Use?
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       3.3.4. Visual EDA Walkthrough
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="04e2-visualEDA-tools.html">
       3.3.5. Visual EDA Tools
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="04f1-viz_narrative.html">
       3.3.6. Better Plots
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="04f2-customizing_figs.html">
       3.3.7. Customizing figures
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="04f3-interactive_figs.html">
       3.3.8. Interactive plots:
       <code class="docutils literal notranslate">
        <span class="pre">
         plotly
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="04f4-exercises.html">
       3.3.9. Exercises
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="04h_Summary.html">
       3.3.10. Chapter Summary
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="05a-otherskills.html">
     3.4. Other (Important) Data Wrangling Skills
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="05b_merging.html">
       3.4.1. Merging
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="05c_missingdata.html">
       3.4.2. Dealing with Missing Data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="05d_outliers.html">
       3.4.3. Dealing with Outliers
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="05e_summary.html">
       3.4.4. Chapter Summary
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../04/00_World_Wide_Data.html">
   4. Building and Using Large (Textual) Data
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../04/01_Intro_to_scraping.html">
     4.1. Getting Data off the Web
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/01a_openingAndParsing.html">
     4.2. Opening + Parsing
     <em>
      a
     </em>
     Webpage
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/01b_spiders.html">
     4.3. Building a spider
    </a>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../04/02_strings.html">
     4.4. Exploiting Textual Data
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../04/02a_Python%20Strings.html">
       4.4.1. Working with Python Strings
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../04/02b_regex.html">
       4.4.2. Regex basics
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../04/02c_developing_a_regex.html">
       4.4.3. Developing a regex
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../04/02d_RegexApplication.html">
       4.4.4. Intro to NLP - The Anchor Phase Technique
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../05/00_intro.html">
   5. Data Science Intro
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../05/01_bigpicture.html">
     5.1. The promise of ML
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/01b_model_process.html">
     5.2. Planning a project
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/01a_MLgonewrong.html">
     5.3. ML Gone Wrong
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/01c_teams.html">
     5.4. Coding in Teams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/01d_sharingBigFiles.html">
     5.5. Sharing large files
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../05/02_reg.html">
   6. Regression
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../05/02a_basics.html">
     6.1. Basics and Notation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/02b_mechanics.html">
     6.2. Mechanics of running regressions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/02c_goodnessOfFit.html">
     6.3. Goodness of Fit
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/02d_interpretingCoefs.html">
     6.4. Interpreting regression coefficients
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/02e_statisticalSig.html">
     6.5. Statistical significance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/02f_warnings.html">
     6.6.
     <em>
      Significant
     </em>
     warnings about “statistical significance”
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/02h_summary_colFE.html">
     6.7. Fixed effects, categorical variables, and prettier regression tables
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/02g_summary.html">
     6.8. Summary and Resources
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../05/03_ML.html">
   7. ML - Intro &amp; Discussion
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../05/03a_ML_obj_and_tradeoff.html">
     7.1. The objective of machine learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/03f_leakage.html">
     7.2. Data Leakage - Illustration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/03f_leakage3.html">
     7.3. Data Leakage - Illustration 2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/03f_leakage2.html">
     7.4. Data Leakage Defined
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/03c_ModelEval.html">
     7.5. Model evaluation via cross validation (CV)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/03c1_OOS.html">
     7.6. Model evaluation via Out-of-Sample (OOS)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/03d_whatToMax.html">
     7.7. Evaluating models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/03e_whichModel.html">
     7.8. Model selection
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../05/04a_SKLearn.html">
   8. ML - Code &amp; Implementation
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../05/04b_best_practices.html">
     8.1. Best Practice Pseudo Code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/04c_onemodel.html">
     8.2. SKLearn Intro
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/04d_crossval.html">
     8.3. Cross-Validation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/04e_pipelines.html">
     8.4. Pipelines
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/04e1_preprocessing.html">
     8.5. Preprocessing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/04f_optimizing_a_model.html">
     8.6. Optimizing a Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/04h_putting_together.html">
     8.7. Many Models
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../05/05a_finapps.html">
   9. Finance Applications
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../05/05a_compounding.html">
     9.1. Compounding returns
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/05a_rolling.html">
     9.2. Rolling returns
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/05a_expanding.html">
     9.3. Expanding returns
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/05b_capm.html">
     9.4. Estimating CAPM
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/05c_factorloadings.html">
     9.5. Estimating better models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/05c_finpacks.html">
     9.6. Supercharged resources/packages
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../05/06_thefuture.html">
   10. The Future
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../05/06a_saving.html">
     10.1. Saving Your Work
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/06b_nextsteps.html">
     10.2. Faster, better, stronger
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/06c_dashboards.html">
     10.3. Dashboards
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Slides and Memes
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../slides/slides.html">
   Slides from previous classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../slides/memes.html">
   Memes
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/03/04e-visualEDA.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/LeDataSciFi/ledatascifi-2024"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/LeDataSciFi/ledatascifi-2024/issues/new?title=Issue%20on%20page%20%2Fcontent/03/04e-visualEDA.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/LeDataSciFi/ledatascifi-2024/edit/main/content/03/04e-visualEDA.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/LeDataSciFi/ledatascifi-2024/main?urlpath=lab/tree/content/03/04e-visualEDA.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/LeDataSciFi/ledatascifi-2024/blob/main/content/03/04e-visualEDA.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#eda-on-a-classic-firm-financial-dataset">
   3.3.4.1. EDA on a classic firm financial dataset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-mystery-of-the-poorly-populated-variables">
   3.3.4.2. The mystery of the poorly populated variables
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#distributions">
   3.3.4.3. Distributions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#covariances-and-relationships-between-variables">
   3.3.4.4. Covariances and relationships between variables
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-the-big-picture-with-pairplot">
     3.3.4.4.1. Getting the big picture with
     <strong>
      Pairplot
     </strong>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-the-big-picture-with-heatmap-with-correlations">
     3.3.4.4.2. Getting the big picture with
     <strong>
      Heatmap with correlations
     </strong>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#digging-in-with-lmplot-and-jointplot">
     3.3.4.4.3. Digging in with
     <strong>
      lmplot
     </strong>
     and
     <strong>
      Jointplot
     </strong>
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="visual-eda-walkthrough">
<h1><span class="section-number">3.3.4. </span>Visual EDA Walkthrough<a class="headerlink" href="#visual-eda-walkthrough" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="04b-whyplot.html"><span class="doc std std-doc">first page of this chapter</span></a> discussed the reasons we plot our data.</p>
<ol class="simple">
<li><p>Data cleaning: To find issues in the data that need to get fixed before we can do larger analysis</p></li>
<li><p>Data exploration: Learning about each of the variables, how they covary, and what further questions you can ask of the data</p></li>
<li><p>Analysis and presentation</p></li>
</ol>
<p>This page is about the first two steps of that.</p>
<div class="section" id="eda-on-a-classic-firm-financial-dataset">
<h2><span class="section-number">3.3.4.1. </span>EDA on a classic firm financial dataset<a class="headerlink" href="#eda-on-a-classic-firm-financial-dataset" title="Permalink to this headline">¶</a></h2>
<p>In <a class="reference internal" href="02e_eda_golden.html"><span class="doc std std-doc">the Pandas EDA</span></a> page, I explored Compustat by producing summary stats to get a sense of the variables involved, look for missing values, and look for problematic outliers. We noted that some variables, like <span class="math notranslate nohighlight">\(delaycon\)</span>, had a lot of missing values and decided we’d look into it.</p>
<p>Let’s continue exploring that dataset. First, let’s download our slice of it. The variables are listed and described in a csv file in the <a class="reference external" href="https://github.com/LeDataSciFi/data">org’s data folder.</a></p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="c1"># these three are used to download the file</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">from</span> <span class="nn">zipfile</span> <span class="kn">import</span> <span class="n">ZipFile</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://github.com/LeDataSciFi/data/blob/main/Firm%20Year%20Datasets%20(Compustat)/CCM_cleaned_for_class.zip?raw=true&#39;</span>

<span class="c1">#firms = pd.read_stata(url)   </span>
<span class="c1"># &lt;-- that code would work, but GH said it was too big and</span>
<span class="c1"># forced me to zip it, so here is the work around to download it:</span>

<span class="k">with</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">request</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

<span class="k">with</span> <span class="n">ZipFile</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">as</span> <span class="n">archive</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">archive</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">archive</span><span class="o">.</span><span class="n">namelist</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span> <span class="k">as</span> <span class="n">stata</span><span class="p">:</span>
        <span class="n">ccm</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="n">stata</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-mystery-of-the-poorly-populated-variables">
<h2><span class="section-number">3.3.4.2. </span>The mystery of the poorly populated variables<a class="headerlink" href="#the-mystery-of-the-poorly-populated-variables" title="Permalink to this headline">¶</a></h2>
<p>Again, there are some variables with lots of missing values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="p">(</span> <span class="c1"># these lines do the calculation - what % of missing values are there for each var</span>
        <span class="n">ccm</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span>      <span class="c1"># ccm.isna() TURNS every obs/variable = 1 when its missing and 0 else</span>
       <span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>     <span class="c1"># count the number of na for each variable (now data is 1 obs per column = # missing)</span>
        <span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ccm</span><span class="p">)</span>       <span class="c1"># convert # missing to % missing </span>
        <span class="o">*</span><span class="mi">100</span>            <span class="c1"># report as percentage</span>
    <span class="p">)</span> 
    <span class="c1"># you can stop here and report this...</span>
    <span class="c1"># but I wanted to format it a bit...</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">13</span><span class="p">]</span>
    <span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;% missing&#39;</span><span class="p">)</span> <span class="c1"># the next line only works on a frame, and because pandas sees only 1 variable at this pt</span>
    <span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">&quot;</span><span class="p">)</span>     <span class="c1"># in the code, it calls this a &quot;series&quot; type object, so convert it to dataframe type object</span>
<span class="p">)</span>
<span class="c1">#</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
</style>
<table id="T_80760_">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >% missing</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_80760_level0_row0" class="row_heading level0 row0" >privdelaycon</th>
      <td id="T_80760_row0_col0" class="data row0 col0" >74.4</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row1" class="row_heading level0 row1" >debtdelaycon</th>
      <td id="T_80760_row1_col0" class="data row1 col0" >74.4</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row2" class="row_heading level0 row2" >equitydelaycon</th>
      <td id="T_80760_row2_col0" class="data row2 col0" >74.4</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row3" class="row_heading level0 row3" >delaycon</th>
      <td id="T_80760_row3_col0" class="data row3 col0" >74.4</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row4" class="row_heading level0 row4" >prodmktfluid</th>
      <td id="T_80760_row4_col0" class="data row4 col0" >60.4</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row5" class="row_heading level0 row5" >tnic3tsimm</th>
      <td id="T_80760_row5_col0" class="data row5 col0" >56.5</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row6" class="row_heading level0 row6" >tnic3hhi</th>
      <td id="T_80760_row6_col0" class="data row6 col0" >56.5</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row7" class="row_heading level0 row7" >smalltaxlosscarry</th>
      <td id="T_80760_row7_col0" class="data row7 col0" >33.5</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row8" class="row_heading level0 row8" >largetaxlosscarry</th>
      <td id="T_80760_row8_col0" class="data row8 col0" >33.5</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row9" class="row_heading level0 row9" >invopps_FG09</th>
      <td id="T_80760_row9_col0" class="data row9 col0" >13.0</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row10" class="row_heading level0 row10" >short_debt</th>
      <td id="T_80760_row10_col0" class="data row10 col0" >12.8</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row11" class="row_heading level0 row11" >sales_g</th>
      <td id="T_80760_row11_col0" class="data row11 col0" >11.8</td>
    </tr>
    <tr>
      <th id="T_80760_level0_row12" class="row_heading level0 row12" >l_laborratio</th>
      <td id="T_80760_row12_col0" class="data row12 col0" >10.4</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>When variables missing that much in a dataset, something systematic is going on and you need to figure it out.</p>
<p>One way you could investigate why those variables are missing. Maybe it’s a data issue, as if some data for variable <span class="math notranslate nohighlight">\(x\)</span> isn’t available in all years. E.g. perhaps a variable isn’t available before 1995 for some reason.</p>
<p>A way you could get a start on that is to plot the % missing by year for each variable. This legend is hard to use because there are too many overlapping lines, which is why it’s a <strong>spaghetti chart</strong>. It would take extra work to unravel the spaghetti and figure out what variables are what. But CLEARLY some variables only become available in 1995 so they can be used after that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
<span class="n">ccm</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;fyear&#39;</span><span class="p">)</span>
    <span class="p">[[</span><span class="s1">&#39;privdelaycon&#39;</span><span class="p">,</span><span class="s1">&#39;debtdelaycon&#39;</span><span class="p">,</span><span class="s1">&#39;equitydelaycon&#39;</span><span class="p">,</span><span class="s1">&#39;delaycon&#39;</span><span class="p">,</span>
     <span class="s1">&#39;prodmktfluid&#39;</span><span class="p">,</span><span class="s1">&#39;tnic3tsimm&#39;</span><span class="p">,</span><span class="s1">&#39;tnic3hhi&#39;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>  <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">)</span> 
    <span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;These variables didn&#39;t exist before 1997!&quot;</span><span class="p">,</span>
               <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Fraction of missing observations&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_5_0.png" src="../../_images/04e-visualEDA_5_0.png" />
</div>
</div>
</div>
<div class="section" id="distributions">
<h2><span class="section-number">3.3.4.3. </span>Distributions<a class="headerlink" href="#distributions" title="Permalink to this headline">¶</a></h2>
<p>Among the first things I do with new data, besides the statistical EDA <a class="reference internal" href="02e_eda_golden.html"><span class="doc std std-doc">we covered in the Pandas section</span></a>, is plot the distribution of each variable to get a sense of the data.</p>
<p>I generally want to know</p>
<ol class="simple">
<li><p>If a variable is numerical</p>
<ol class="simple">
<li><p>How many observations are missing and is it systematic (like in the example above)?</p></li>
<li><p>Is it continuous or discrete?</p></li>
<li><p>What is the shape of a distribution (normal, binary, skewed left, skewed right, fat-tailed, etc.)?</p></li>
<li><p>How prevalent are outliers?</p></li>
</ol>
</li>
<li><p>If a variable is categorical</p>
<ol class="simple">
<li><p>What are the common values?</p></li>
<li><p>Are the averages of numerical variables different for different categories?</p></li>
</ol>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Remember the <code class="docutils literal notranslate"><span class="pre">gsector</span></code> variable! Just because a variable is a “number” doesn’t mean the numbers have a mathematical meaning!</p>
</div>
<p>Four functions come in handy as a starting point, and you should look at their documentation and the example galleries: <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.displot.html"><code class="docutils literal notranslate"><span class="pre">sns.displot</span></code></a>, <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.boxplot.html"><code class="docutils literal notranslate"><span class="pre">sns.boxplot</span></code></a>, <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.catplot.html"><code class="docutils literal notranslate"><span class="pre">sns.catplot</span></code></a>, and the built-in pandas plot function <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.html"><code class="docutils literal notranslate"><span class="pre">df[&lt;columnName&gt;].plot()</span></code></a></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ol class="simple">
<li><p>Quick syntax help: Remember to type <kbd>SHIFT</kbd> + <kbd>TAB</kbd> when the cursor inside a function!</p></li>
<li><p>Better syntax help: Go to the official seaborn page for your function and look at the examples to figure out what argument creates the change you want.</p></li>
</ol>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ccm</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span><span class="s1">&#39;td_a&#39;</span><span class="p">,</span>
            <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;kde&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;A density (kind=&quot;kde&quot;) graph&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_7_0.png" src="../../_images/04e-visualEDA_7_0.png" />
</div>
</div>
<p>This time, let’s query the dataset to eliminate outliers that distort the graph:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ccm</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;td_a &lt; 1 &amp; td_a &gt; 0&#39;</span><span class="p">),</span>
            <span class="n">x</span><span class="o">=</span><span class="s1">&#39;td_a&#39;</span><span class="p">,</span>
            <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;kde&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Used .query() to filter outliers&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_9_0.png" src="../../_images/04e-visualEDA_9_0.png" />
</div>
</div>
<p>And now I’ll add a histogram on top:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ccm</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;td_a &lt; 1 &amp; td_a &gt; 0&#39;</span><span class="p">),</span>
            <span class="n">x</span><span class="o">=</span><span class="s1">&#39;td_a&#39;</span><span class="p">,</span> 
            <span class="c1"># kind=hist is the default, so I&#39;m not even typing it</span>
            <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;kind=&quot;hist&quot;, kde=True --&gt; histogram + kde&#39;</span> <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_11_0.png" src="../../_images/04e-visualEDA_11_0.png" />
</div>
</div>
<p>Let’s look at the distribution of leverage (<code class="docutils literal notranslate"><span class="pre">td_a</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ccm</span><span class="p">,</span> 
            <span class="n">x</span><span class="o">=</span><span class="s1">&#39;td_a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Outliers can distort graph until useless&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_13_0.png" src="../../_images/04e-visualEDA_13_0.png" />
</div>
</div>
<p>Again, let’s query the dataset to eliminate outliers that distort the graph:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ccm</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;td_a &lt; 1 &amp; td_a &gt; 0&#39;</span><span class="p">),</span> 
            <span class="n">x</span><span class="o">=</span><span class="s1">&#39;td_a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;With query, outliers are filtered, main patterns visible&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_15_0.png" src="../../_images/04e-visualEDA_15_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">ccm</span><span class="p">,</span>
            <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;div_d&#39;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span>
           <span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;div_d is a binary variable: Does the firm pay dividends?&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_16_0.png" src="../../_images/04e-visualEDA_16_0.png" />
</div>
</div>
<p>To visualize the counts of categorical variables, it’s easy to do with pandas.</p>
<ul class="simple">
<li><p>Note 1: You need to manually count the variable before calling the plot.</p></li>
<li><p>Note 2: What is industry 40? It’s a great idea to replace the numeric category labels with the corresponding industry names (Finance)</p></li>
<li><p>Note 3: I like horizontal bars because if you replace the industry code with the industry name, it’s easier to read</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># pandas built in plot </span>
<span class="n">ccm</span><span class="p">[</span><span class="s1">&#39;gsector&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_18_0.png" src="../../_images/04e-visualEDA_18_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sns.catplot is powerful, but it&#39;s overkill for a categorical count</span>
<span class="n">sns</span><span class="o">.</span><span class="n">catplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ccm</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="s1">&#39;gsector&#39;</span><span class="p">,</span>
            <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span>
            <span class="c1"># sns wants to use all diff colors, which is distracting  </span>
            <span class="c1"># on this particular graph with no value. </span>
            <span class="c1"># so I force all colors to grey by adding this:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;grey&#39;</span><span class="p">,</span> 
            <span class="c1"># to sort the categories, need to tell sns the order to sort:</span>
            <span class="n">order</span> <span class="o">=</span> <span class="n">ccm</span><span class="p">[</span><span class="s1">&#39;gsector&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_19_0.png" src="../../_images/04e-visualEDA_19_0.png" />
</div>
</div>
</div>
<div class="section" id="covariances-and-relationships-between-variables">
<h2><span class="section-number">3.3.4.4. </span>Covariances and relationships between variables<a class="headerlink" href="#covariances-and-relationships-between-variables" title="Permalink to this headline">¶</a></h2>
<p>To get a quick sense of relationships, I like to use <code class="docutils literal notranslate"><span class="pre">pairplot</span></code> and <code class="docutils literal notranslate"><span class="pre">heatmap</span></code> to get a quick sense of relationships.</p>
<div class="section" id="getting-the-big-picture-with-pairplot">
<h3><span class="section-number">3.3.4.4.1. </span>Getting the big picture with <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.pairplot.html"><strong>Pairplot</strong></a><a class="headerlink" href="#getting-the-big-picture-with-pairplot" title="Permalink to this headline">¶</a></h3>
<p>I like passing <code class="docutils literal notranslate"><span class="pre">corner=True</span></code> or using the <code class="docutils literal notranslate"><span class="pre">x_vars</span></code> and <code class="docutils literal notranslate"><span class="pre">y_vars</span></code> parameters to make the info shown more usable.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>With pairplot,</p>
<ol class="simple">
<li><p>Use 7 or fewer variables at a time. If your dataset has a lot of variables, do them part by part.</p></li>
<li><p>Don’t plot all of the data points! This will oversaturate your graphs and make it harder to draw any conclusions. Below, I randomly sample a piece of the dataset.</p></li>
</ol>
</div>
<p><strong>It’s clear from running these two plots that some extreme outliers are hiding patterns by messing with the scales and influencing the regression lines.</strong></p>
<p>(We should deal with these outliers later.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># every time you run this, you&#39;ll get diff figures... why?!</span>
<span class="n">f1</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">ccm</span><span class="p">[[</span><span class="s1">&#39;capx_a&#39;</span><span class="p">,</span> <span class="s1">&#39;xrd_a&#39;</span><span class="p">,</span> <span class="s1">&#39;cash_a&#39;</span><span class="p">,</span><span class="s1">&#39;td_a&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
                <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;reg&#39;</span><span class="p">,</span>
                 <span class="n">corner</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_21_0.png" src="../../_images/04e-visualEDA_21_0.png" />
</div>
</div>
<p>This time the “kind” is a histogram. In 2D, a histogram is squares with colors corresponding to frequency at that spot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f2</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">ccm</span><span class="p">[[</span><span class="s1">&#39;capx_a&#39;</span><span class="p">,</span> <span class="s1">&#39;xrd_a&#39;</span><span class="p">,</span> <span class="s1">&#39;cash_a&#39;</span><span class="p">,</span><span class="s1">&#39;td_a&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
                <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span>
                 <span class="n">corner</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># hist handles a lot of datapoints well</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_23_0.png" src="../../_images/04e-visualEDA_23_0.png" />
</div>
</div>
</div>
<div class="section" id="getting-the-big-picture-with-heatmap-with-correlations">
<h3><span class="section-number">3.3.4.4.2. </span>Getting the big picture with <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.pairplot.html"><strong>Heatmap with correlations</strong></a><a class="headerlink" href="#getting-the-big-picture-with-heatmap-with-correlations" title="Permalink to this headline">¶</a></h3>
<p>After some pairplots (and often before), I like to look at correlations.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This analysis step doesn’t help for categorical variables!</p>
<p>Make sure you don’t include categorical variables that are numbers!</p>
<p>(E.g. industry classifications are numbers that have no meaning.)</p>
</div>
<p>Seeing the correlations between variables is nice.</p>
<p>A correlation table is ugly and hard to work with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ccm</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gvkey</th>
      <th>fyear</th>
      <th>lpermno</th>
      <th>sic</th>
      <th>sic3</th>
      <th>age</th>
      <th>at</th>
      <th>me</th>
      <th>l_a</th>
      <th>l_sale</th>
      <th>...</th>
      <th>tnic3hhi</th>
      <th>tnic3tsimm</th>
      <th>prodmktfluid</th>
      <th>delaycon</th>
      <th>equitydelaycon</th>
      <th>debtdelaycon</th>
      <th>privdelaycon</th>
      <th>l_emp</th>
      <th>l_ppent</th>
      <th>l_laborratio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>gvkey</th>
      <td>1.000000</td>
      <td>0.534930</td>
      <td>0.475523</td>
      <td>0.107321</td>
      <td>0.107265</td>
      <td>-0.276126</td>
      <td>0.010126</td>
      <td>0.014763</td>
      <td>0.126591</td>
      <td>0.038674</td>
      <td>...</td>
      <td>-0.021473</td>
      <td>0.036015</td>
      <td>0.244347</td>
      <td>0.212391</td>
      <td>0.225956</td>
      <td>-0.110047</td>
      <td>0.276941</td>
      <td>-0.090190</td>
      <td>0.002419</td>
      <td>0.103596</td>
    </tr>
    <tr>
      <th>fyear</th>
      <td>0.534930</td>
      <td>1.000000</td>
      <td>0.402615</td>
      <td>0.098469</td>
      <td>0.098408</td>
      <td>0.449878</td>
      <td>0.080264</td>
      <td>0.142570</td>
      <td>0.345151</td>
      <td>0.243784</td>
      <td>...</td>
      <td>0.047983</td>
      <td>-0.084418</td>
      <td>0.060319</td>
      <td>-0.028163</td>
      <td>-0.037806</td>
      <td>0.029978</td>
      <td>-0.048051</td>
      <td>0.029245</td>
      <td>0.184322</td>
      <td>0.257928</td>
    </tr>
    <tr>
      <th>lpermno</th>
      <td>0.475523</td>
      <td>0.402615</td>
      <td>1.000000</td>
      <td>0.110724</td>
      <td>0.110660</td>
      <td>-0.195393</td>
      <td>0.019407</td>
      <td>-0.021205</td>
      <td>0.029452</td>
      <td>-0.042433</td>
      <td>...</td>
      <td>-0.019426</td>
      <td>0.049461</td>
      <td>0.168210</td>
      <td>0.132109</td>
      <td>0.150432</td>
      <td>-0.039851</td>
      <td>0.188820</td>
      <td>-0.155718</td>
      <td>-0.079054</td>
      <td>0.054108</td>
    </tr>
    <tr>
      <th>sic</th>
      <td>0.107321</td>
      <td>0.098469</td>
      <td>0.110724</td>
      <td>1.000000</td>
      <td>0.999999</td>
      <td>-0.072601</td>
      <td>0.036937</td>
      <td>-0.016392</td>
      <td>0.050434</td>
      <td>-0.031385</td>
      <td>...</td>
      <td>-0.052579</td>
      <td>0.138981</td>
      <td>0.111862</td>
      <td>-0.034781</td>
      <td>-0.025027</td>
      <td>-0.067122</td>
      <td>0.046615</td>
      <td>-0.030025</td>
      <td>-0.152852</td>
      <td>-0.223692</td>
    </tr>
    <tr>
      <th>sic3</th>
      <td>0.107265</td>
      <td>0.098408</td>
      <td>0.110660</td>
      <td>0.999999</td>
      <td>1.000000</td>
      <td>-0.072562</td>
      <td>0.036988</td>
      <td>-0.016361</td>
      <td>0.050608</td>
      <td>-0.031159</td>
      <td>...</td>
      <td>-0.052559</td>
      <td>0.138958</td>
      <td>0.111700</td>
      <td>-0.034839</td>
      <td>-0.025132</td>
      <td>-0.066992</td>
      <td>0.046468</td>
      <td>-0.029792</td>
      <td>-0.152593</td>
      <td>-0.223594</td>
    </tr>
    <tr>
      <th>age</th>
      <td>-0.276126</td>
      <td>0.449878</td>
      <td>-0.195393</td>
      <td>-0.072601</td>
      <td>-0.072562</td>
      <td>1.000000</td>
      <td>0.079051</td>
      <td>0.191595</td>
      <td>0.376925</td>
      <td>0.394578</td>
      <td>...</td>
      <td>0.052359</td>
      <td>-0.154524</td>
      <td>-0.243894</td>
      <td>-0.210383</td>
      <td>-0.239992</td>
      <td>0.108078</td>
      <td>-0.296800</td>
      <td>0.304658</td>
      <td>0.366293</td>
      <td>0.187915</td>
    </tr>
    <tr>
      <th>at</th>
      <td>0.010126</td>
      <td>0.080264</td>
      <td>0.019407</td>
      <td>0.036937</td>
      <td>0.036988</td>
      <td>0.079051</td>
      <td>1.000000</td>
      <td>0.418377</td>
      <td>0.250631</td>
      <td>0.192991</td>
      <td>...</td>
      <td>-0.034427</td>
      <td>0.026975</td>
      <td>0.060690</td>
      <td>0.004913</td>
      <td>-0.004631</td>
      <td>0.014204</td>
      <td>-0.031252</td>
      <td>0.221481</td>
      <td>0.174699</td>
      <td>0.058018</td>
    </tr>
    <tr>
      <th>me</th>
      <td>0.014763</td>
      <td>0.142570</td>
      <td>-0.021205</td>
      <td>-0.016392</td>
      <td>-0.016361</td>
      <td>0.191595</td>
      <td>0.418377</td>
      <td>1.000000</td>
      <td>0.359011</td>
      <td>0.338825</td>
      <td>...</td>
      <td>-0.027534</td>
      <td>-0.029282</td>
      <td>0.013475</td>
      <td>-0.005837</td>
      <td>-0.010836</td>
      <td>-0.018789</td>
      <td>-0.018693</td>
      <td>0.391248</td>
      <td>0.349469</td>
      <td>0.142494</td>
    </tr>
    <tr>
      <th>l_a</th>
      <td>0.126591</td>
      <td>0.345151</td>
      <td>0.029452</td>
      <td>0.050434</td>
      <td>0.050608</td>
      <td>0.376925</td>
      <td>0.250631</td>
      <td>0.359011</td>
      <td>1.000000</td>
      <td>0.872928</td>
      <td>...</td>
      <td>-0.244952</td>
      <td>0.135873</td>
      <td>0.070614</td>
      <td>-0.065039</td>
      <td>-0.139895</td>
      <td>0.171411</td>
      <td>-0.221926</td>
      <td>0.718865</td>
      <td>0.832030</td>
      <td>0.373117</td>
    </tr>
    <tr>
      <th>l_sale</th>
      <td>0.038674</td>
      <td>0.243784</td>
      <td>-0.042433</td>
      <td>-0.031385</td>
      <td>-0.031159</td>
      <td>0.394578</td>
      <td>0.192991</td>
      <td>0.338825</td>
      <td>0.872928</td>
      <td>1.000000</td>
      <td>...</td>
      <td>-0.108592</td>
      <td>-0.162672</td>
      <td>-0.164440</td>
      <td>-0.174759</td>
      <td>-0.276642</td>
      <td>0.242195</td>
      <td>-0.359774</td>
      <td>0.805165</td>
      <td>0.832674</td>
      <td>0.196937</td>
    </tr>
    <tr>
      <th>prof_a</th>
      <td>-0.032376</td>
      <td>-0.016935</td>
      <td>-0.024876</td>
      <td>0.000183</td>
      <td>0.000213</td>
      <td>0.036991</td>
      <td>0.001021</td>
      <td>0.015373</td>
      <td>0.076535</td>
      <td>0.111897</td>
      <td>...</td>
      <td>-0.006247</td>
      <td>-0.017040</td>
      <td>-0.048775</td>
      <td>-0.101483</td>
      <td>-0.144560</td>
      <td>0.069140</td>
      <td>-0.155657</td>
      <td>0.057073</td>
      <td>0.068003</td>
      <td>0.040532</td>
    </tr>
    <tr>
      <th>mb</th>
      <td>0.015236</td>
      <td>0.024092</td>
      <td>0.018649</td>
      <td>0.009941</td>
      <td>0.009921</td>
      <td>-0.008643</td>
      <td>-0.007318</td>
      <td>0.007431</td>
      <td>-0.072881</td>
      <td>-0.053002</td>
      <td>...</td>
      <td>0.004663</td>
      <td>-0.017202</td>
      <td>0.012462</td>
      <td>0.114049</td>
      <td>0.168112</td>
      <td>-0.140150</td>
      <td>0.215779</td>
      <td>-0.038118</td>
      <td>-0.055769</td>
      <td>-0.052968</td>
    </tr>
    <tr>
      <th>ppe_a</th>
      <td>-0.135813</td>
      <td>-0.171166</td>
      <td>-0.127377</td>
      <td>-0.265391</td>
      <td>-0.265214</td>
      <td>0.021262</td>
      <td>-0.044536</td>
      <td>0.014267</td>
      <td>0.046263</td>
      <td>0.111666</td>
      <td>...</td>
      <td>-0.010736</td>
      <td>-0.274219</td>
      <td>-0.140591</td>
      <td>0.011186</td>
      <td>-0.049586</td>
      <td>0.180126</td>
      <td>-0.179432</td>
      <td>0.160349</td>
      <td>0.487191</td>
      <td>0.611810</td>
    </tr>
    <tr>
      <th>capx_a</th>
      <td>-0.066717</td>
      <td>-0.163322</td>
      <td>-0.048126</td>
      <td>-0.128922</td>
      <td>-0.128830</td>
      <td>-0.126680</td>
      <td>-0.034281</td>
      <td>-0.014750</td>
      <td>-0.081184</td>
      <td>-0.062048</td>
      <td>...</td>
      <td>-0.025464</td>
      <td>-0.112381</td>
      <td>-0.014537</td>
      <td>0.069741</td>
      <td>0.042308</td>
      <td>0.041066</td>
      <td>0.000323</td>
      <td>0.012417</td>
      <td>0.147684</td>
      <td>0.295649</td>
    </tr>
    <tr>
      <th>xrd_a</th>
      <td>0.092295</td>
      <td>0.080038</td>
      <td>0.064314</td>
      <td>-0.056463</td>
      <td>-0.056631</td>
      <td>-0.048923</td>
      <td>-0.019533</td>
      <td>-0.017695</td>
      <td>-0.180619</td>
      <td>-0.214395</td>
      <td>...</td>
      <td>-0.042739</td>
      <td>0.009194</td>
      <td>0.169561</td>
      <td>0.179756</td>
      <td>0.256839</td>
      <td>-0.156769</td>
      <td>0.285156</td>
      <td>-0.130468</td>
      <td>-0.166178</td>
      <td>-0.072052</td>
    </tr>
    <tr>
      <th>cash_a</th>
      <td>0.224050</td>
      <td>0.153596</td>
      <td>0.142805</td>
      <td>0.039442</td>
      <td>0.039296</td>
      <td>-0.120339</td>
      <td>-0.024931</td>
      <td>-0.029058</td>
      <td>-0.240905</td>
      <td>-0.303408</td>
      <td>...</td>
      <td>-0.001263</td>
      <td>-0.061901</td>
      <td>0.231409</td>
      <td>0.250270</td>
      <td>0.356693</td>
      <td>-0.398662</td>
      <td>0.491385</td>
      <td>-0.242722</td>
      <td>-0.316222</td>
      <td>-0.156323</td>
    </tr>
    <tr>
      <th>div_d</th>
      <td>-0.143810</td>
      <td>-0.105791</td>
      <td>-0.176155</td>
      <td>-0.034704</td>
      <td>-0.034589</td>
      <td>0.209333</td>
      <td>0.076352</td>
      <td>0.133055</td>
      <td>0.434820</td>
      <td>0.411841</td>
      <td>...</td>
      <td>-0.097187</td>
      <td>0.125090</td>
      <td>-0.061720</td>
      <td>-0.124230</td>
      <td>-0.146363</td>
      <td>0.095661</td>
      <td>-0.188719</td>
      <td>0.378149</td>
      <td>0.409395</td>
      <td>0.127227</td>
    </tr>
    <tr>
      <th>td</th>
      <td>0.003857</td>
      <td>0.068688</td>
      <td>0.011306</td>
      <td>0.033958</td>
      <td>0.033992</td>
      <td>0.078200</td>
      <td>0.830751</td>
      <td>0.361632</td>
      <td>0.224592</td>
      <td>0.173297</td>
      <td>...</td>
      <td>-0.019110</td>
      <td>0.015334</td>
      <td>0.048355</td>
      <td>0.013929</td>
      <td>0.006329</td>
      <td>0.017482</td>
      <td>-0.017984</td>
      <td>0.194655</td>
      <td>0.149301</td>
      <td>0.067114</td>
    </tr>
    <tr>
      <th>td_a</th>
      <td>-0.041912</td>
      <td>-0.058602</td>
      <td>-0.025629</td>
      <td>-0.007453</td>
      <td>-0.007468</td>
      <td>0.001203</td>
      <td>0.005640</td>
      <td>-0.005687</td>
      <td>0.036377</td>
      <td>0.044912</td>
      <td>...</td>
      <td>-0.001006</td>
      <td>-0.067247</td>
      <td>-0.014955</td>
      <td>0.013493</td>
      <td>-0.003257</td>
      <td>0.179656</td>
      <td>-0.090580</td>
      <td>0.038511</td>
      <td>0.104232</td>
      <td>0.156660</td>
    </tr>
    <tr>
      <th>td_mv</th>
      <td>-0.095096</td>
      <td>-0.136315</td>
      <td>-0.078023</td>
      <td>0.058698</td>
      <td>0.058789</td>
      <td>0.008723</td>
      <td>0.094805</td>
      <td>-0.027080</td>
      <td>0.264727</td>
      <td>0.180944</td>
      <td>...</td>
      <td>-0.083947</td>
      <td>0.224841</td>
      <td>0.046017</td>
      <td>-0.053045</td>
      <td>-0.115435</td>
      <td>0.356015</td>
      <td>-0.276715</td>
      <td>0.127690</td>
      <td>0.225602</td>
      <td>0.158872</td>
    </tr>
    <tr>
      <th>dltt_a</th>
      <td>-0.025243</td>
      <td>-0.027216</td>
      <td>-0.017234</td>
      <td>-0.016189</td>
      <td>-0.016199</td>
      <td>0.034247</td>
      <td>-0.006857</td>
      <td>-0.004115</td>
      <td>0.088419</td>
      <td>0.091396</td>
      <td>...</td>
      <td>-0.019466</td>
      <td>-0.093693</td>
      <td>-0.017095</td>
      <td>0.016273</td>
      <td>-0.009877</td>
      <td>0.185298</td>
      <td>-0.099023</td>
      <td>0.069760</td>
      <td>0.168018</td>
      <td>0.214947</td>
    </tr>
    <tr>
      <th>dv_a</th>
      <td>0.000433</td>
      <td>0.002155</td>
      <td>-0.006613</td>
      <td>0.011560</td>
      <td>0.011547</td>
      <td>0.017824</td>
      <td>-0.002553</td>
      <td>0.008590</td>
      <td>-0.002643</td>
      <td>0.010263</td>
      <td>...</td>
      <td>0.020645</td>
      <td>-0.013909</td>
      <td>-0.015901</td>
      <td>-0.016225</td>
      <td>-0.023186</td>
      <td>-0.008109</td>
      <td>-0.027834</td>
      <td>0.004705</td>
      <td>0.000153</td>
      <td>0.029392</td>
    </tr>
    <tr>
      <th>invopps_FG09</th>
      <td>0.014087</td>
      <td>0.025920</td>
      <td>0.019696</td>
      <td>0.013651</td>
      <td>0.013632</td>
      <td>-0.008012</td>
      <td>-0.009023</td>
      <td>0.005050</td>
      <td>-0.068388</td>
      <td>-0.053791</td>
      <td>...</td>
      <td>-0.000954</td>
      <td>0.017745</td>
      <td>0.018953</td>
      <td>0.119372</td>
      <td>0.177258</td>
      <td>-0.153368</td>
      <td>0.230717</td>
      <td>-0.040975</td>
      <td>-0.057058</td>
      <td>-0.047338</td>
    </tr>
    <tr>
      <th>sales_g</th>
      <td>0.002118</td>
      <td>-0.000244</td>
      <td>0.003401</td>
      <td>-0.000393</td>
      <td>-0.000395</td>
      <td>-0.006840</td>
      <td>-0.001200</td>
      <td>-0.001852</td>
      <td>-0.009331</td>
      <td>-0.010363</td>
      <td>...</td>
      <td>-0.001085</td>
      <td>-0.000550</td>
      <td>0.009896</td>
      <td>-0.001228</td>
      <td>0.001472</td>
      <td>-0.008093</td>
      <td>0.007809</td>
      <td>-0.008432</td>
      <td>-0.009231</td>
      <td>0.000193</td>
    </tr>
    <tr>
      <th>short_debt</th>
      <td>0.017008</td>
      <td>-0.031044</td>
      <td>0.031285</td>
      <td>0.076769</td>
      <td>0.076772</td>
      <td>-0.112489</td>
      <td>0.025343</td>
      <td>-0.023332</td>
      <td>-0.195373</td>
      <td>-0.231229</td>
      <td>...</td>
      <td>0.056781</td>
      <td>0.135594</td>
      <td>0.030166</td>
      <td>0.020471</td>
      <td>0.063244</td>
      <td>-0.129376</td>
      <td>0.124318</td>
      <td>-0.177918</td>
      <td>-0.307513</td>
      <td>-0.216896</td>
    </tr>
    <tr>
      <th>long_debt_dum</th>
      <td>-0.120833</td>
      <td>-0.118462</td>
      <td>-0.097384</td>
      <td>-0.048407</td>
      <td>-0.048333</td>
      <td>0.057693</td>
      <td>0.039313</td>
      <td>0.054351</td>
      <td>0.247078</td>
      <td>0.254331</td>
      <td>...</td>
      <td>-0.051041</td>
      <td>0.064945</td>
      <td>-0.015834</td>
      <td>-0.058475</td>
      <td>-0.097171</td>
      <td>0.251156</td>
      <td>-0.196334</td>
      <td>0.229960</td>
      <td>0.307833</td>
      <td>0.141860</td>
    </tr>
    <tr>
      <th>atr</th>
      <td>0.055605</td>
      <td>-0.021006</td>
      <td>0.048001</td>
      <td>-0.057143</td>
      <td>-0.057163</td>
      <td>-0.130810</td>
      <td>-0.037131</td>
      <td>-0.076904</td>
      <td>-0.292325</td>
      <td>-0.280625</td>
      <td>...</td>
      <td>0.080345</td>
      <td>-0.100169</td>
      <td>0.119474</td>
      <td>0.184233</td>
      <td>0.242827</td>
      <td>-0.087503</td>
      <td>0.254502</td>
      <td>-0.176234</td>
      <td>-0.205942</td>
      <td>-0.049847</td>
    </tr>
    <tr>
      <th>smalltaxlosscarry</th>
      <td>0.121731</td>
      <td>0.228745</td>
      <td>0.087134</td>
      <td>0.011192</td>
      <td>0.011204</td>
      <td>0.144917</td>
      <td>0.050115</td>
      <td>0.090566</td>
      <td>0.198132</td>
      <td>0.181862</td>
      <td>...</td>
      <td>-0.014424</td>
      <td>-0.055757</td>
      <td>-0.032283</td>
      <td>-0.042433</td>
      <td>-0.053955</td>
      <td>0.006375</td>
      <td>-0.043721</td>
      <td>0.125611</td>
      <td>0.167890</td>
      <td>0.094071</td>
    </tr>
    <tr>
      <th>largetaxlosscarry</th>
      <td>0.131454</td>
      <td>0.176323</td>
      <td>0.103508</td>
      <td>-0.010460</td>
      <td>-0.010525</td>
      <td>-0.011025</td>
      <td>-0.030574</td>
      <td>-0.068973</td>
      <td>-0.263600</td>
      <td>-0.311908</td>
      <td>...</td>
      <td>0.064159</td>
      <td>0.109787</td>
      <td>0.180862</td>
      <td>0.158367</td>
      <td>0.210634</td>
      <td>-0.070300</td>
      <td>0.219635</td>
      <td>-0.242570</td>
      <td>-0.237480</td>
      <td>0.027022</td>
    </tr>
    <tr>
      <th>tnic3hhi</th>
      <td>-0.021473</td>
      <td>0.047983</td>
      <td>-0.019426</td>
      <td>-0.052579</td>
      <td>-0.052559</td>
      <td>0.052359</td>
      <td>-0.034427</td>
      <td>-0.027534</td>
      <td>-0.244952</td>
      <td>-0.108592</td>
      <td>...</td>
      <td>1.000000</td>
      <td>-0.301292</td>
      <td>-0.310163</td>
      <td>-0.114673</td>
      <td>-0.116476</td>
      <td>0.051374</td>
      <td>-0.106777</td>
      <td>-0.053393</td>
      <td>-0.129702</td>
      <td>-0.132895</td>
    </tr>
    <tr>
      <th>tnic3tsimm</th>
      <td>0.036015</td>
      <td>-0.084418</td>
      <td>0.049461</td>
      <td>0.138981</td>
      <td>0.138958</td>
      <td>-0.154524</td>
      <td>0.026975</td>
      <td>-0.029282</td>
      <td>0.135873</td>
      <td>-0.162672</td>
      <td>...</td>
      <td>-0.301292</td>
      <td>1.000000</td>
      <td>0.396461</td>
      <td>0.303963</td>
      <td>0.385465</td>
      <td>-0.180947</td>
      <td>0.382518</td>
      <td>-0.165729</td>
      <td>-0.149036</td>
      <td>0.048841</td>
    </tr>
    <tr>
      <th>prodmktfluid</th>
      <td>0.244347</td>
      <td>0.060319</td>
      <td>0.168210</td>
      <td>0.111862</td>
      <td>0.111700</td>
      <td>-0.243894</td>
      <td>0.060690</td>
      <td>0.013475</td>
      <td>0.070614</td>
      <td>-0.164440</td>
      <td>...</td>
      <td>-0.310163</td>
      <td>0.396461</td>
      <td>1.000000</td>
      <td>0.317672</td>
      <td>0.383794</td>
      <td>-0.179151</td>
      <td>0.396171</td>
      <td>-0.192621</td>
      <td>-0.108475</td>
      <td>0.119382</td>
    </tr>
    <tr>
      <th>delaycon</th>
      <td>0.212391</td>
      <td>-0.028163</td>
      <td>0.132109</td>
      <td>-0.034781</td>
      <td>-0.034839</td>
      <td>-0.210383</td>
      <td>0.004913</td>
      <td>-0.005837</td>
      <td>-0.065039</td>
      <td>-0.174759</td>
      <td>...</td>
      <td>-0.114673</td>
      <td>0.303963</td>
      <td>0.317672</td>
      <td>1.000000</td>
      <td>0.910246</td>
      <td>-0.129176</td>
      <td>0.530678</td>
      <td>-0.122729</td>
      <td>-0.067429</td>
      <td>0.095262</td>
    </tr>
    <tr>
      <th>equitydelaycon</th>
      <td>0.225956</td>
      <td>-0.037806</td>
      <td>0.150432</td>
      <td>-0.025027</td>
      <td>-0.025132</td>
      <td>-0.239992</td>
      <td>-0.004631</td>
      <td>-0.010836</td>
      <td>-0.139895</td>
      <td>-0.276642</td>
      <td>...</td>
      <td>-0.116476</td>
      <td>0.385465</td>
      <td>0.383794</td>
      <td>0.910246</td>
      <td>1.000000</td>
      <td>-0.199101</td>
      <td>0.723611</td>
      <td>-0.184878</td>
      <td>-0.155000</td>
      <td>0.064953</td>
    </tr>
    <tr>
      <th>debtdelaycon</th>
      <td>-0.110047</td>
      <td>0.029978</td>
      <td>-0.039851</td>
      <td>-0.067122</td>
      <td>-0.066992</td>
      <td>0.108078</td>
      <td>0.014204</td>
      <td>-0.018789</td>
      <td>0.171411</td>
      <td>0.242195</td>
      <td>...</td>
      <td>0.051374</td>
      <td>-0.180947</td>
      <td>-0.179151</td>
      <td>-0.129176</td>
      <td>-0.199101</td>
      <td>1.000000</td>
      <td>-0.490911</td>
      <td>0.180458</td>
      <td>0.221762</td>
      <td>0.067969</td>
    </tr>
    <tr>
      <th>privdelaycon</th>
      <td>0.276941</td>
      <td>-0.048051</td>
      <td>0.188820</td>
      <td>0.046615</td>
      <td>0.046468</td>
      <td>-0.296800</td>
      <td>-0.031252</td>
      <td>-0.018693</td>
      <td>-0.221926</td>
      <td>-0.359774</td>
      <td>...</td>
      <td>-0.106777</td>
      <td>0.382518</td>
      <td>0.396171</td>
      <td>0.530678</td>
      <td>0.723611</td>
      <td>-0.490911</td>
      <td>1.000000</td>
      <td>-0.257807</td>
      <td>-0.276021</td>
      <td>-0.030851</td>
    </tr>
    <tr>
      <th>l_emp</th>
      <td>-0.090190</td>
      <td>0.029245</td>
      <td>-0.155718</td>
      <td>-0.030025</td>
      <td>-0.029792</td>
      <td>0.304658</td>
      <td>0.221481</td>
      <td>0.391248</td>
      <td>0.718865</td>
      <td>0.805165</td>
      <td>...</td>
      <td>-0.053393</td>
      <td>-0.165729</td>
      <td>-0.192621</td>
      <td>-0.122729</td>
      <td>-0.184878</td>
      <td>0.180458</td>
      <td>-0.257807</td>
      <td>1.000000</td>
      <td>0.787591</td>
      <td>0.028813</td>
    </tr>
    <tr>
      <th>l_ppent</th>
      <td>0.002419</td>
      <td>0.184322</td>
      <td>-0.079054</td>
      <td>-0.152852</td>
      <td>-0.152593</td>
      <td>0.366293</td>
      <td>0.174699</td>
      <td>0.349469</td>
      <td>0.832030</td>
      <td>0.832674</td>
      <td>...</td>
      <td>-0.129702</td>
      <td>-0.149036</td>
      <td>-0.108475</td>
      <td>-0.067429</td>
      <td>-0.155000</td>
      <td>0.221762</td>
      <td>-0.276021</td>
      <td>0.787591</td>
      <td>1.000000</td>
      <td>0.556455</td>
    </tr>
    <tr>
      <th>l_laborratio</th>
      <td>0.103596</td>
      <td>0.257928</td>
      <td>0.054108</td>
      <td>-0.223692</td>
      <td>-0.223594</td>
      <td>0.187915</td>
      <td>0.058018</td>
      <td>0.142494</td>
      <td>0.373117</td>
      <td>0.196937</td>
      <td>...</td>
      <td>-0.132895</td>
      <td>0.048841</td>
      <td>0.119382</td>
      <td>0.095262</td>
      <td>0.064953</td>
      <td>0.067969</td>
      <td>-0.030851</td>
      <td>0.028813</td>
      <td>0.556455</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
<p>39 rows × 39 columns</p>
</div></div></div>
</div>
<p>But a lazily made figure of that exact same info is somewhat workable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f3</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">ccm</span><span class="o">.</span><span class="n">corr</span><span class="p">())</span> <span class="c1"># v1, use the nicer version below!</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_27_0.png" src="../../_images/04e-visualEDA_27_0.png" />
</div>
</div>
<p>Cleaning that and making it more useful is easy:</p>
<ol class="simple">
<li><p>Drop the numerical variables that don’t make sense in a correlation matrix</p></li>
<li><p>Make the figure large enough to see</p></li>
<li><p>Colors: cold for negative corr, hot for positive corr</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># dont plot identifying type info or categorical vars</span>
<span class="n">corr</span> <span class="o">=</span> <span class="n">ccm</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;gvkey&#39;</span><span class="p">,</span><span class="s1">&#39;lpermno&#39;</span><span class="p">,</span><span class="s1">&#39;sic3&#39;</span><span class="p">,</span><span class="s1">&#39;fyear&#39;</span><span class="p">,</span><span class="s1">&#39;sic&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span> <span class="c1"># make a big space for the figure</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span>
                 <span class="c1"># cmap for the colors, </span>
                 <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">square</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">cmap</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">diverging_palette</span><span class="p">(</span><span class="mi">230</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                 <span class="c1"># mask to hide the upper diag (redundant)</span>
                 <span class="n">mask</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">triu</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)),</span>
                 <span class="c1"># shrink the heat legend</span>
                 <span class="n">cbar_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;shrink&quot;</span><span class="p">:</span> <span class="mf">.5</span><span class="p">},</span>
                 <span class="c1">#optional: vmax and vmin will &quot;cap&quot; the color range</span>
                <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_29_0.png" src="../../_images/04e-visualEDA_29_0.png" />
</div>
</div>
<p>That is an information DENSE figure, but we somehow managed to get it on screen decently! Still, it’s a ton of variables, and doing this in parts would be a good idea.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you’re feeling frisky, and your data is in good shape, you can push this farther by using <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.clustermap.html"><code class="docutils literal notranslate"><span class="pre">sns.clustermap</span></code></a> to find clusters of similar variables.</p>
</div>
<p>Also - don’t take these correlations as gospel yet: They should <em>point</em> you towards further relationships to explore, which you should do one plot at a time.</p>
</div>
<div class="section" id="digging-in-with-lmplot-and-jointplot">
<h3><span class="section-number">3.3.4.4.3. </span>Digging in with <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.relplot.html"><strong>lmplot</strong></a> and <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.jointplot.html"><strong>Jointplot</strong></a><a class="headerlink" href="#digging-in-with-lmplot-and-jointplot" title="Permalink to this headline">¶</a></h3>
<p>These are good for digging into the relationships between two continuous variables.</p>
<p>Let’s dig into a strong correlation suggested by our heatmap.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Jointplot can be slow - it’s doing a lot.</p>
<p>Again, don’t plot all of the data points! As your sample size goes up, either randomly sample data, or use “hex” style graphs.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f1</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ccm</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;xrd_a&lt;.4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
                  <span class="n">x</span><span class="o">=</span><span class="s2">&quot;prodmktfluid&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;xrd_a&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;reg&#39;</span><span class="p">)</span> 
<span class="c1"># notice: most firms have 0 R&amp;D!</span>
<span class="c1"># set_title doesn&#39;t work with jointplots</span>
<span class="n">f1</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Strongly positive, even with zero R&amp;D firms in sample&#39;</span><span class="p">)</span>
<span class="n">f1</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span> <span class="c1"># Reduce plot to make room </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_32_0.png" src="../../_images/04e-visualEDA_32_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f2</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ccm</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;xrd_a&lt;.4 &amp; xrd_a &gt; 0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
                  <span class="n">x</span><span class="o">=</span><span class="s2">&quot;prodmktfluid&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;xrd_a&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;reg&#39;</span><span class="p">)</span>

<span class="n">f2</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Among R&amp;D firms, even stronger relationship&#39;</span><span class="p">)</span>
<span class="n">f2</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span> <span class="c1"># Reduce plot to make room </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_33_0.png" src="../../_images/04e-visualEDA_33_0.png" />
</div>
</div>
<p>I’d pencil this as a relationship to look into more (Do firms do more R&amp;D <em><strong>because</strong></em> of the fluidity of their product market?) and then continue exploring.</p>
<p><code class="docutils literal notranslate"><span class="pre">lmplot</span></code> will plot regressions as well, but it makes it easy add <a class="reference internal" href="04d-whichplot.html"><span class="doc std std-doc">facets</span></a> to see if the relationship depends on a third (categorical) variable with the <code class="docutils literal notranslate"><span class="pre">hue</span></code>, <code class="docutils literal notranslate"><span class="pre">col</span></code>, and <code class="docutils literal notranslate"><span class="pre">row</span></code> parameters. (And you can combine <code class="docutils literal notranslate"><span class="pre">hue</span></code>, <code class="docutils literal notranslate"><span class="pre">col</span></code>, and <code class="docutils literal notranslate"><span class="pre">row</span></code> to see several cuts!)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f3</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ccm</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;xrd_a&lt;.4 &amp; xrd_a &gt; 0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
                  <span class="n">x</span><span class="o">=</span><span class="s2">&quot;prodmktfluid&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;xrd_a&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;div_d&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_35_0.png" src="../../_images/04e-visualEDA_35_0.png" />
</div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">col</span></code> instead of <code class="docutils literal notranslate"><span class="pre">hue</span></code> “works”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f4</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ccm</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;xrd_a&lt;.4 &amp; xrd_a &gt; 0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
                  <span class="n">x</span><span class="o">=</span><span class="s2">&quot;prodmktfluid&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;xrd_a&quot;</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s1">&#39;div_d&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/04e-visualEDA_37_0.png" src="../../_images/04e-visualEDA_37_0.png" />
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/03"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="04d-whichplot.html" title="previous page"><span class="section-number">3.3.3. </span>Which Plot Type Should I Use?</a>
    <a class='right-next' id="next-link" href="04e2-visualEDA-tools.html" title="next page"><span class="section-number">3.3.5. </span>Visual EDA Tools</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Prof. Donald Bowen<br/>
        
            &copy; Copyright 2024.<br/>
          <div class="extra_footer">
            You're doing well, keep going!
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>