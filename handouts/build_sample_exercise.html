
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Warning &#8212; LeDataSciFi-2024</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/frontpage.css" />
    <link rel="stylesheet" type="text/css" href="../_static/fin377_specialformatting.css" />
    <link rel="stylesheet" type="text/css" href="../_static/moviescript.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script >const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">LeDataSciFi-2024</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <p class="caption collapsible-parent">
 <span class="caption-text">
  Syllabus
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/objectives.html">
   Objectives
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/outcomes.html">
   Outcomes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/about_us.html">
   About us + office hours
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/structure_and_policies.html">
   Course structure + policies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/use_of_gpt.html">
   ChatGPT and other AI
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/gradeoverview.html">
   Grading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/interest.html">
   Interested but unsure?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/bootcamp.html">
   Pre-Class Bootcamp
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/hall_of_awesomeness.html">
   The Hall of Awesomeness
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/acknowledgments.html">
   Gratitude
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Schedule, tips, resources
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/schedule.html">
   Dashboard, key links, schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/help.html">
   Help
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/resources.html">
   Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/about/tips.html">
   Tips and hacks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/LeDataSciFi/ledatascifi-2024/tree/main/community_codebook">
   Community Codebook
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/LeDataSciFi/ledatascifi-2024/tree/main/handouts">
   Class Handouts
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Assignments and participation
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../content/assignments/howto_do.html">
   How to start and turn in assignments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/assignments/howto_review.html">
   How to do your peer reviews
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/assignments/mid_proj.html">
   Midterm project AKA ASGN 5
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/assignments/website_setup.html">
   Personal Website AKA ASGN 9
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/assignments/project.html">
   Final projects
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Textbook
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../content/01/00_Getting_Started.html">
   1. Motivation and Getting Started
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/01_Motivation.html">
     1.1. Motivation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/02_Setup.html">
     1.2. Set up
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/03_github.html">
     1.3. GitHub Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/03a_githubworkflow.html">
     1.4. The GitHub Workflow
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/04_Markdown.html">
     1.5. Markdown basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/05_jupyterlab.html">
     1.6. Jupyter Lab Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/06_python.html">
     1.7. Python Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/07_debugging.html">
     1.8. Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/07a_errors.html">
     1.9. Errors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/08_libraries.html">
     1.10. Libraries/Packages
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/01/09_gitignore.html">
     1.11. Gitignore Files
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../content/02/10_Golden_1.html">
   2. Good Analysis Practices
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../content/02/10_Golden_2.html">
     2.1. A case study of bad research
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/02/10_Golden_3.html">
     2.2. The golden rules
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/02/10_Golden_6.html">
     2.3. Organizing your projects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/02/10_Golden_7.html">
     2.4. Filepaths
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/02/10_Golden_4.html">
     2.5. Storing data smartly
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/02/10_Golden_5a.html">
     2.6. Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/02/10_Golden_5b.html">
     2.7. Writing good code comments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/02/10_Golden_8.html">
     2.8. Writing good code
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../content/03/00_Data_Wrangling_Intro.html">
   3. Wrangling with Data
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../content/03/01_Numpy.html">
     3.1. Numpy
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/01a_NumpyCS.html">
       3.1.1. Numpy + Scientific Computing
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/01b_NumpyBasics.html">
       3.1.2. A (Very) Short Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/01c_NumpyPractice.html">
       3.1.3. Exercises
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/01d_NumpyResources.html">
       3.1.4. More Resources
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../content/03/02a_pandasIntro.html">
     3.2. Pandas
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/02a_pandasTips.html">
       3.2.1. Tips
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/02b_pandasVocab.html">
       3.2.2. Vocab and Long vs Wide Data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/02c_commonFcns.html">
       3.2.3. Common Functions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/02d_temp.html">
       3.2.4. Temp. vs Perm. Objects
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/02e_eda_golden.html">
       3.2.5. Golden Rules + EDA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/02f_chains.html">
       3.2.6. Pandas Chains
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/02g_commontasks.html">
       3.2.7. Common Tasks
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/02h_exercises.html">
       3.2.8. Exercises
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/02j_resourcesAndSum.html">
       3.2.9. Summary and Resources
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../content/03/04a-dataviz.html">
     3.3. Data Visualization
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/04b-whyplot.html">
       3.3.1. The Role of Viz in Analysis
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/04c-makeplot.html">
       3.3.2. Making a Plot
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/04d-whichplot.html">
       3.3.3. Which Plot Type Should I Use?
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/04e-visualEDA.html">
       3.3.4. Visual EDA Walkthrough
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/04e2-visualEDA-tools.html">
       3.3.5. Visual EDA Tools
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/04f1-viz_narrative.html">
       3.3.6. Better Plots
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/04f2-customizing_figs.html">
       3.3.7. Customizing figures
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/04f3-interactive_figs.html">
       3.3.8. Interactive plots:
       <code class="docutils literal notranslate">
        <span class="pre">
         plotly
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/04f4-exercises.html">
       3.3.9. Exercises
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/04h_Summary.html">
       3.3.10. Chapter Summary
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../content/03/05a-otherskills.html">
     3.4. Other (Important) Data Wrangling Skills
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/05b_merging.html">
       3.4.1. Merging
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/05c_missingdata.html">
       3.4.2. Dealing with Missing Data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/05d_outliers.html">
       3.4.3. Dealing with Outliers
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/03/05e_summary.html">
       3.4.4. Chapter Summary
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../content/04/00_World_Wide_Data.html">
   4. Building and Using Large (Textual) Data
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../content/04/01_Intro_to_scraping.html">
     4.1. Getting Data off the Web
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/04/01a_openingAndParsing.html">
     4.2. Opening + Parsing
     <em>
      a
     </em>
     Webpage
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/04/01b_spiders.html">
     4.3. Building a spider
    </a>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../content/04/02_strings.html">
     4.4. Exploiting Textual Data
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../content/04/02a_Python%20Strings.html">
       4.4.1. Working with Python Strings
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/04/02b_regex.html">
       4.4.2. Regex basics
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/04/02c_developing_a_regex.html">
       4.4.3. Developing a regex
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../content/04/02d_RegexApplication.html">
       4.4.4. Intro to NLP - The Anchor Phase Technique
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../content/05/00_intro.html">
   5. Data Science Intro
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/01_bigpicture.html">
     5.1. The promise of ML
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/01b_model_process.html">
     5.2. Planning a project
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/01a_MLgonewrong.html">
     5.3. ML Gone Wrong
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/01c_teams.html">
     5.4. Coding in Teams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/01d_sharingBigFiles.html">
     5.5. Sharing large files
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../content/05/02_reg.html">
   6. Regression
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/02a_basics.html">
     6.1. Basics and Notation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/02b_mechanics.html">
     6.2. Mechanics of running regressions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/02c_goodnessOfFit.html">
     6.3. Goodness of Fit
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/02d_interpretingCoefs.html">
     6.4. Interpreting regression coefficients
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/02e_statisticalSig.html">
     6.5. Statistical significance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/02f_warnings.html">
     6.6.
     <em>
      Significant
     </em>
     warnings about “statistical significance”
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/02h_summary_colFE.html">
     6.7. Fixed effects, categorical variables, and prettier regression tables
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/02g_summary.html">
     6.8. Summary and Resources
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../content/05/03_ML.html">
   7. ML - Intro &amp; Discussion
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/03a_ML_obj_and_tradeoff.html">
     7.1. The objective of machine learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/03f_leakage.html">
     7.2. Data Leakage - Illustration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/03f_leakage3.html">
     7.3. Data Leakage - Illustration 2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/03f_leakage2.html">
     7.4. Data Leakage Defined
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/03c_ModelEval.html">
     7.5. Model evaluation via cross validation (CV)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/03c1_OOS.html">
     7.6. Model evaluation via Out-of-Sample (OOS)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/03d_whatToMax.html">
     7.7. Evaluating models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/03e_whichModel.html">
     7.8. Model selection
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../content/05/04a_SKLearn.html">
   8. ML - Code &amp; Implementation
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/04b_best_practices.html">
     8.1. Best Practice Pseudo Code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/04c_onemodel.html">
     8.2. SKLearn Intro
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/04d_crossval.html">
     8.3. Cross-Validation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/04e_pipelines.html">
     8.4. Pipelines
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/04e1_preprocessing.html">
     8.5. Preprocessing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/04f_optimizing_a_model.html">
     8.6. Optimizing a Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/04h_putting_together.html">
     8.7. Many Models
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../content/05/05a_finapps.html">
   9. Finance Applications
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/05a_compounding.html">
     9.1. Compounding returns
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/05a_rolling.html">
     9.2. Rolling returns
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/05a_expanding.html">
     9.3. Expanding returns
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/05b_capm.html">
     9.4. Estimating CAPM
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/05c_factorloadings.html">
     9.5. Estimating better models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/05c_finpacks.html">
     9.6. Supercharged resources/packages
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../content/05/06_thefuture.html">
   10. The Future
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/06a_saving.html">
     10.1. Saving Your Work
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/06b_nextsteps.html">
     10.2. Faster, better, stronger
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../content/05/06c_dashboards.html">
     10.3. Dashboards
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Slides and Memes
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../content/slides/slides.html">
   Slides from previous classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../content/slides/memes.html">
   Memes
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/handouts/build_sample_exercise.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/LeDataSciFi/ledatascifi-2024"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/LeDataSciFi/ledatascifi-2024/issues/new?title=Issue%20on%20page%20%2Fhandouts/build_sample_exercise.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/LeDataSciFi/ledatascifi-2024/edit/main/handouts/build_sample_exercise.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/LeDataSciFi/ledatascifi-2024/main?urlpath=lab/tree/handouts/build_sample_exercise.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/LeDataSciFi/ledatascifi-2024/blob/main/handouts/build_sample_exercise.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Warning
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#first">
   First
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#load-sentiment-dictionaries">
   Load sentiment dictionaries
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#looping-over-a-dataframe-and-adding-a-variable">
   Looping over a dataframe and adding a variable
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#measure-sentiment">
   Measure sentiment
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#opening-a-10-k-file">
   Opening a 10-K file
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cleaning-the-html">
   Cleaning the html
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#get-10-k-dates">
   Get 10-K dates
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#get-returns-around-the-10-k-dates">
   Get returns around the 10-K dates
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#put-it-all-together">
   Put it all together
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="warning">
<h1>Warning<a class="headerlink" href="#warning" title="Permalink to this headline">¶</a></h1>
<p>Some students copy this file into their assignment repo. DON’T!!!</p>
<p>Why? This file is just exercises that help you build that file. Here, we are solving little problems you’ll have as you write it.</p>
<p>When you create <code class="docutils literal notranslate"><span class="pre">build_sample.ipynb</span></code>, do it from scratch, put the psuedocode structure in place, and proceed from there.</p>
</div>
<div class="section" id="first">
<h1>First<a class="headerlink" href="#first" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Copy <code class="docutils literal notranslate"><span class="pre">NEAR_regex.py</span></code> into the same folder as this file. <a class="reference external" href="https://ledatascifi.github.io/ledatascifi-2024/content/04/02d_RegexApplication.html#demo">It’s here</a> (click the “+”) or in the community codebook. You should name the file <code class="docutils literal notranslate"><span class="pre">NEAR_regex.py</span></code> and not <code class="docutils literal notranslate"><span class="pre">NEAR_regex.ipynb</span></code>.</p></li>
<li><p>Also copy the 10k_files_practice.zip file there into this folder</p></li>
<li><p>Make a <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> file in this folder with  <code class="docutils literal notranslate"><span class="pre">**10k_files/*</span></code> in it.</p></li>
<li><p>Copy <a class="reference external" href="https://github.com/donbowen/Class-Notes-1045/raw/main/Midterm%20sandbox/10k_files.zip">this file</a> into the <code class="docutils literal notranslate"><span class="pre">10k_files/</span></code> folder here.</p></li>
<li><p>Copy the things in the assignment’s input folder in to the inputs folder here.</p></li>
<li><p>Optional: You can install <code class="docutils literal notranslate"><span class="pre">tqdm</span></code> (If you don’t, then remove it from the code below.)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fnmatch</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">from</span> <span class="nn">zipfile</span> <span class="kn">import</span> <span class="n">ZipFile</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">from</span> <span class="nn">near_regex</span> <span class="kn">import</span> <span class="n">NEAR_regex</span>  <span class="c1"># copy this file into the folder this script is in</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>  <span class="c1"># progress bar on loops</span>

<span class="c1"># if you have tqdm issues, run this in terminal or with ! trick</span>
<span class="c1"># jupyter nbextension enable --py widgetsnbextension</span>
<span class="c1"># jupyter labextension install @jupyter-widgets/jupyterlab-manager</span>
<span class="c1">#</span>
<span class="c1"># if that fails, you can disable it</span>

<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="load-sentiment-dictionaries">
<h1>Load sentiment dictionaries<a class="headerlink" href="#load-sentiment-dictionaries" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Q1 - load the ML negative words into a list called BHR_negative</span>
<span class="c1"># BHR is the author names on that paper</span>
<span class="c1"># &quot;ML&quot; might be a better name, but having &quot;LM&quot; and &quot;ML&quot; in bound</span>
<span class="c1"># to cause transcription errors</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Q2 - load the ML positive words into a list called BHR_positive</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Q3 - load the LM negative words into a list called LM_positive</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Q4 - load the LM positive words into a list called LM_positive</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="looping-over-a-dataframe-and-adding-a-variable">
<h1>Looping over a dataframe and adding a variable<a class="headerlink" href="#looping-over-a-dataframe-and-adding-a-variable" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="c1"># step 1 will load some database and prep it for the loopy parts</span>
<span class="c1"># here, we will just use a toy dataset</span>

<span class="n">toy_database</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Security&quot;</span><span class="p">:[</span><span class="s1">&#39;3M&#39;</span><span class="p">,</span><span class="s1">&#39;TLSA&#39;</span><span class="p">,</span><span class="s1">&#39;APPL&#39;</span><span class="p">],</span>
             <span class="s2">&quot;URL&quot;</span><span class="p">:[</span><span class="s1">&#39;blahblah.com&#39;</span><span class="p">,</span><span class="s1">&#39;wikisomething.com&#39;</span><span class="p">,</span><span class="s1">&#39;wiki.com&#39;</span><span class="p">]})</span>

<span class="c1"># step 2: figure out how to loop through this dataframe </span>
<span class="c1"># yes, an actual for loop on a dataframe (booooooo)</span>
<span class="k">for</span> <span class="n">______________________________</span><span class="p">:</span> 
    <span class="c1"># print the row&#39;s index, and the url from the row, this will confirm if we are looping right</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">_________________________</span><span class="p">)</span> 

    <span class="c1"># A. here, you would open the related 10k, but SKIP this for now</span>

    <span class="c1"># B. You&#39;d measure the sentiment here. Let&#39;s just pretend that </span>
    <span class="c1"># you opened+cleaned+built a sentiment variable </span>
    <span class="c1"># called &quot;sentiment_positive&quot; (a bad name, but this is just example code!)</span>

    <span class="n">sentiment_positive</span><span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># this is a silly line to &quot;simulate&quot; that got a value for this variable</span>

    <span class="n">__________________________</span> <span class="c1"># add sentiment_positive to your toy database</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="measure-sentiment">
<h1>Measure sentiment<a class="headerlink" href="#measure-sentiment" title="Permalink to this headline">¶</a></h1>
<p>What fraction of the words in this “document” (sentence) are “happy” words?</p>
<p>Answer: 2/13. Let’s replicate that with code.</p>
<p>First, count the length of the document.</p>
<p>Then, count how many times each word is in the document.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">happy_sentiment</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;happy&#39;</span><span class="p">,</span><span class="s1">&#39;smile&#39;</span><span class="p">,</span><span class="s1">&#39;hopeful&#39;</span><span class="p">]</span>

<span class="n">sentence</span> <span class="o">=</span> <span class="s1">&#39;I am happy that you are here. I am all smiles. So hopeful!&#39;</span>

<span class="c1"># q0 count the number of &quot;words&quot; (the doc length)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># q1 count how many times &quot;happy&quot; is used in the doc</span>
<span class="c1"># hint: https://ledatascifi.github.io/ledatascifi-2024/content/04/02b_regex.html</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># q2 count how many times &quot;smile&quot; is used in the doc</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># q3 count how many times &quot;smile&quot; or &quot;happy&quot; is used in the doc</span>
<span class="c1"># hint: similar to q2 answer... </span>
<span class="c1"># the answer is somewhere this page: https://regexone.com/</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># q4 - prof demo - count how many time all the words are in the doc</span>
<span class="c1"># 4.4.4 has examples + output</span>
<span class="c1"># docstring: https://github.com/LeDataSciFi/ledatascifi-2024/blob/main/community_codebook/near_regex.py</span>
<span class="c1"># solve </span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># q5 - using py&#39;s string functions, convert</span>
<span class="c1"># happy_sentiment into the format NEAR_regex() wants </span>
<span class="c1"># hint: 4.4.1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># q6 - calculate the doc&#39;s happy_sentiment score</span>
</pre></div>
</div>
</div>
</div>
<p>Anchor phrases</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># q7: how many times is (happy or smile) near (face or head)? </span>

<span class="n">body_parts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;face&#39;</span><span class="p">,</span><span class="s1">&#39;head&#39;</span><span class="p">]</span>

<span class="n">sentence1</span> <span class="o">=</span> <span class="s1">&#39;I see smile on your face. That is so awesome!&#39;</span>
<span class="n">sentence2</span> <span class="o">=</span> <span class="s1">&#39;I see smile. That is so awesome!&#39;</span>

<span class="c1"># do on sentence1 - </span>
<span class="c1"># using py&#39;s string functions, convert body_parts into the format NEAR_regex()</span>
<span class="c1"># then use near_regex()</span>

<span class="c1"># do on sentence2</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="opening-a-10-k-file">
<h1>Opening a 10-K file<a class="headerlink" href="#opening-a-10-k-file" title="Permalink to this headline">¶</a></h1>
<p>I’m giving everyone this code because dealing with Zips is a headache the first 15 times you do it.</p>
<ul class="simple">
<li><p>Open the zip before the loop and get a list of all files already in it</p></li>
<li><p>With that zip open, do your loopy stuff inside it</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># open the zip file (do this before the for loop</span>
<span class="c1"># so you only open it one time... faster)</span>
<span class="k">with</span> <span class="n">ZipFile</span><span class="p">(</span><span class="s1">&#39;10k_files/10k_files_practice.zip&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zipfolder</span><span class="p">:</span>
    
    <span class="c1"># before the loop, get list of files in zipped folder</span>
    <span class="n">file_list</span> <span class="o">=</span> <span class="n">zipfolder</span><span class="o">.</span><span class="n">namelist</span><span class="p">()</span>
        
    <span class="c1"># replace this with how you&#39;d loop over the dataframe</span>
    <span class="c1"># which you already know...</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1800</span><span class="p">]:</span> <span class="c1"># </span>
        
        <span class="c1"># get a list of possible files for this firm</span>
        <span class="n">firm_folder</span>    <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sec-edgar-filings/</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">firm</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="si">}</span><span class="s2">/10-K/*/*.html&quot;</span>
        <span class="n">possible_files</span> <span class="o">=</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">firm_folder</span><span class="p">)</span> 
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">possible_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> 
            <span class="k">continue</span>
            
        <span class="n">fpath</span> <span class="o">=</span> <span class="n">possible_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># the first match is the path to the file</span>

        <span class="c1"># open the file (this is a little different!)</span>
        <span class="k">with</span> <span class="n">zipfolder</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span> <span class="k">as</span> <span class="n">report_file</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">report_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            
        <span class="c1"># do more stuff here...</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="cleaning-the-html">
<h1>Cleaning the html<a class="headerlink" href="#cleaning-the-html" title="Permalink to this headline">¶</a></h1>
<p>Print out <code class="docutils literal notranslate"><span class="pre">html</span></code>…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">html</span><span class="p">[:</span><span class="mi">500</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Regex won’t work on this as is! We need to remove all the html tags, drop the hidden data, and then, with the remaining text, clean it up using the “Good ideas” in 4.4 and 4.4.4 of the book. However, we have to slightly adjust the code.</p>
<ol>
<li><p>Use BeautifulSoup() with the <code class="docutils literal notranslate"><span class="pre">lxml-xml</span></code> parser. Call the output <code class="docutils literal notranslate"><span class="pre">soup</span></code>. Don’t use <code class="docutils literal notranslate"><span class="pre">get_text</span></code> yet.</p></li>
<li><p>Delete the hidden XBRL</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span><span class="s1">&#39;display:none&#39;</span><span class="p">}):</span> 
    <span class="n">div</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Continue on (get the text from the soup, and continue from there…)</p></li>
<li><p>Check: My cleaned string says ______ in positions <em><strong>-</strong></em></p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># work here</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="get-10-k-dates">
<h1>Get 10-K dates<a class="headerlink" href="#get-10-k-dates" title="Permalink to this headline">¶</a></h1>
<p>We need to know when the 10-K is released to see the stock returns around it.</p>
<p>I’m going to give you most of this code. How I figured it out:</p>
<ul class="simple">
<li><p>I know we have the CIK and accession number</p></li>
<li><p>Looked for EDGAR urls that have CIK + accession number, and then list filing date on the page</p></li>
<li><p><a class="reference external" href="https://www.sec.gov/Archives/edgar/data/1122304/0001193125-15-118890-index.html">https://www.sec.gov/Archives/edgar/data/1122304/0001193125-15-118890-index.html</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">requests_html</span></code> (<a class="reference external" href="https://ledatascifi.github.io/ledatascifi-2024/content/04/01_Intro_to_scraping.html#my-suggestion">my listed suggestion here</a>) is the <code class="docutils literal notranslate"><span class="pre">requests</span></code> module for getting data from the web PLUS the ability to grab parts of the html</p></li>
</ul>
<p>Exercise:</p>
<ul class="simple">
<li><p>I used code straight off the <a class="reference external" href="https://requests.readthedocs.io/projects/requests-html/en/latest/">documentation’s home page</a>, adapted slightly. Look for examples that <em>find</em> parts of the html.</p></li>
<li><p>You’ll need to figure out the “CSS Selector”</p>
<ul>
<li><p>right click on the filing date on the webpage, click inspect</p></li>
<li><p>in the area that popped up, right click on html code containing that date and copy the CSS selector</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># before the loop, set up a browser session</span>

<span class="kn">from</span> <span class="nn">requests_html</span> <span class="kn">import</span> <span class="n">HTMLSession</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">HTMLSession</span><span class="p">()</span>

<span class="c1"># inside your loop, get the cik and accession number for the filing</span>

<span class="n">cik</span> <span class="o">=</span> <span class="mi">1122304</span>
<span class="n">accession_number</span> <span class="o">=</span> <span class="s1">&#39;0001193125-15-118890&#39;</span>

<span class="c1"># *one* way to get the filing date... </span>

<span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;https://www.sec.gov/Archives/edgar/data/</span><span class="si">{</span><span class="n">cik</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">accession_number</span><span class="si">}</span><span class="s1">-index.html&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="c1"># check it out...</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXERCISE: get the filing date out of this &quot;r&quot; object (one line of code will do)</span>
</pre></div>
</div>
</div>
</div>
<p>To use this in your actual midterm, save the  accession_number to your database while doing the main for loop to parse the text.</p>
<p>Then, after that, I wrote a second for loop that loops over the rows, and uses the code above to grab the date. I added some error checking (What if we don’t have an accession number for that firm, what if the url is wrong, or the server denies you, or the line of code with filing_date fails?)</p>
</div>
<div class="section" id="get-returns-around-the-10-k-dates">
<h1>Get returns around the 10-K dates<a class="headerlink" href="#get-returns-around-the-10-k-dates" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/LeDataSciFi/data/blob/main/Stock%20Returns%20(CRSP)">Returns for 2022 are here.</a></p>
<p>Before you try to use that, below is a toy dataset of returns and filing dates that mimic the structure of the data you’ll actually have.</p>
<p>Goals, in <strong>reverse</strong> order:</p>
<ol class="simple">
<li><p>What is the [0,2] and [3,10] cumulative returns for each firm? It’s easy to actually figure out! Doing so will help you with the pseudo, and in any case… how can you know if you’re right otherwise?</p></li>
<li><p>Make an intermediate dataset with these variables (which is enough to answer goal 1).</p>
<ul class="simple">
<li><p>ticker</p></li>
<li><p>date</p></li>
<li><p>ret</p></li>
<li><p>trading_days_since_filing (0 on the filing date or the first trading day after it). This is what the midterm calls for.</p></li>
</ul>
</li>
<li><p>Find the answer manually in excel. <code class="docutils literal notranslate"><span class="pre">crsp_example.xlsx</span></code> is in the handouts folder. This will help you find the steps you need to take.</p></li>
</ol>
<p>If you figured out the bonus on assignment 4, you’re set!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ticker&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;JJSF&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">20</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;TSLA&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">20</span><span class="p">,</span>
    <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;2021-12-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-03&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-06&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-07&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-08&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-09&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-10&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-13&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-14&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-15&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-16&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-17&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-20&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-21&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-22&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-23&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-27&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-28&#39;</span><span class="p">,</span> <span class="s1">&#39;2021-12-29&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;2022-12-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-05&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-06&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-07&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-08&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-09&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-12&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-13&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-14&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-15&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-16&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-19&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-20&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-21&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-22&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-23&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-27&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-28&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-29&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-12-30&#39;</span><span class="p">],</span>
    <span class="s1">&#39;ret&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.011276</span><span class="p">,</span> <span class="mf">0.030954</span><span class="p">,</span> <span class="mf">0.000287</span><span class="p">,</span> <span class="mf">0.014362</span><span class="p">,</span> <span class="mf">0.012459</span><span class="p">,</span> <span class="mf">0.017200</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.010173</span><span class="p">,</span> <span class="mf">0.011875</span><span class="p">,</span> <span class="mf">0.012559</span><span class="p">,</span> <span class="mf">0.002508</span><span class="p">,</span> <span class="mf">0.022852</span><span class="p">,</span> <span class="mf">0.012360</span><span class="p">,</span> <span class="mf">0.017387</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.008957</span><span class="p">,</span> <span class="mf">0.016840</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.000256</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.002558</span><span class="p">,</span> <span class="mf">0.009041</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.002097</span><span class="p">,</span> <span class="mf">0.010189</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mf">0.000822</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.063687</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.014415</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.032143</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.003447</span><span class="p">,</span> <span class="mf">0.032345</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.062720</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.040937</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.025784</span><span class="p">,</span> <span class="mf">0.005548</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.047187</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.002396</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.080536</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.001669</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.088828</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.017551</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.114089</span><span class="p">,</span> <span class="mf">0.033089</span><span class="p">,</span> <span class="mf">0.080827</span><span class="p">,</span> <span class="mf">0.011164</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">crsp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">crsp</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">crsp</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

<span class="n">fake_filings</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;ticker&#39;</span><span class="p">:[</span><span class="s1">&#39;JJSF&#39;</span><span class="p">,</span><span class="s1">&#39;TSLA&#39;</span><span class="p">],</span>
                             <span class="s1">&#39;filing_date&#39;</span><span class="p">:[</span><span class="s1">&#39;2021-12-03&#39;</span><span class="p">,</span><span class="s1">&#39;2022-12-13&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># try here...</span>

<span class="c1"># pseudocode first! imagine the structure of the dataset you want and work backwards, you&#39;ll struggle otherwise!</span>

<span class="c1"># this really is a paper and pencil problem</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="put-it-all-together">
<h1>Put it all together<a class="headerlink" href="#put-it-all-together" title="Permalink to this headline">¶</a></h1>
<p>The readme shows what the output dataset should look like, roughly. The midterm directions elaborate (10 sentiment variables, 2 return measures).</p>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./handouts"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Prof. Donald Bowen<br/>
        
            &copy; Copyright 2024.<br/>
          <div class="extra_footer">
            You're doing well, keep going!
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>